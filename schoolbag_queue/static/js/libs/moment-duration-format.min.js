!function(e){function t(e){var t="";if(e=parseInt(e,10),!e||1>e)return t;for(;e;)t+="0",e-=1;return t}function n(e,n,r){return null==e&&(e=""),e=""+e,(r?e:"")+t(n-e.length)+(r?"":e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}function u(e,t){var n,r=0,i=e.length;for("function"!=typeof t&&(n=t,t=function(e){return e===n});i>r;){if(t(e[r]))return e[r];r+=1}}function s(e,t){var n=0,r=e.length;if(e&&r)for(;r>n;){if(t(e[n],n)===!1)return;n+=1}}function a(e,t){var n=0,r=e.length,i=[];if(!e||!r)return i;for(;r>n;)i[n]=t(e[n],n),n+=1;return i}function c(e,t){return a(e,function(e){return e[t]})}function l(e){var t=[];return s(e,function(e){e&&t.push(e)}),t}function f(e){var t=[];return s(e,function(e){u(t,e)||t.push(e)}),t}function p(e,t){var n=[];return s(e,function(e){s(t,function(t){e===t&&n.push(e)})}),f(n)}function h(e,t){var n=[];return s(e,function(r,i){return t(r)?void 0:(n=e.slice(i),!1)}),n}function m(e,t){var n=e.slice().reverse();return h(n,t).reverse()}function y(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var d;if("function"==typeof require)try{d=require("moment")}catch(g){}if(!d&&e.moment&&(d=e.moment),!d)throw"Moment Duration Format cannot find Moment.js";d.duration.fn.format=function(){var e,o,g,v,w,M,b=[].slice.call(arguments),k=y({},this.format.defaults),j=d.duration(this);return k.duration=this,s(b,function(e){return"string"==typeof e||"function"==typeof e?void(k.template=e):"number"==typeof e?void(k.precision=e):void(i(e)&&y(k,e))}),g=k.types=r(k.types)?k.types:k.types.split(" "),"function"==typeof k.template&&(k.template=k.template.apply(k)),e=new RegExp(a(g,function(e){return k[e].source}).join("|"),"g"),v=function(e){return u(g,function(t){return k[t].test(e)})},o=a(k.template.match(e),function(e,t){var n=v(e),r=e.length;return{index:t,length:r,token:"escape"===n?e.replace(k.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}},this),w=p(g,f(l(c(o,"type")))),w.length?(s(w,function(e,t){var n,r,i,u,a;n=j.as(e),r=n>0?Math.floor(n):Math.ceil(n),i=n-r,u=t+1===w.length,a=!t,s(o,function(t){t.type===e&&(y(t,{value:n,wholeValue:r,decimalValue:i,isLeast:u,isMost:a}),a&&null==k.forceLength&&t.length>1&&(k.forceLength=!0))}),j.subtract(r,e)}),k.trim&&(o=("left"===k.trim?h:m)(o,function(e){return!(e.isLeast||null!=e.type&&e.wholeValue)})),M=!1,"right"===k.trim&&o.reverse(),o=a(o,function(e){var r,i;if(!e.type)return e.token;if(r=e.isLeast&&k.precision<0?(Math.floor(e.wholeValue*Math.pow(10,k.precision))*Math.pow(10,-k.precision)).toString():e.wholeValue.toString(),r=r.replace(/^\-/,""),e.length>1&&(M||e.isMost||k.forceLength)&&(r=n(r,e.length)),e.isLeast&&k.precision>0)switch(i=e.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/),i.length){case 1:r+="."+n(i[0],k.precision,!0).slice(0,k.precision);break;case 2:r+="."+n(i[1],k.precision,!0).slice(0,k.precision);break;case 3:r+="."+n(t(+i[2]-1)+(i[0]||"0")+i[1],k.precision,!0).slice(0,k.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return e.isMost&&e.value<0&&(r="-"+r),M=!0,r}),"right"===k.trim&&o.reverse(),o.join("")):c(o,"token").join("")},d.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var e=this.types,t=this.duration,n=o(e,function(e){return t._data[e]});switch(n){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}(this);